CC = clang -g -O2 -lm -Wall -fsanitize=undefined
EXECUTABLES = main

all : $(EXECUTABLES)


###############################################################################
# 			Regles de compilation
###############################################################################

%.o : %.c
		$(CC) $(CFLAGS) -c $<

main.o :  main.c
###############################################################################
# edition de lien des modules separes 
# pour la creation des programmes executables 
###############################################################################

main : main.o 
		$(CC)  $(CFLAGS) $^ -o $@ 

###############################################################################
# nettoyage : suppression des fichiers .o et des executables
###############################################################################

clean :
	rm -rf $(EXECUTABLES) *.o

###############################################################################
# Lancement : Lancement de l'executable
###############################################################################

run :clean all
	./main

###############################################################################